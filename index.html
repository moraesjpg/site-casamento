<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Júlia e Ruan</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Preconnect (melhora carregamento das fontes) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Fontes -->
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;500&family=Lato:wght@300;400&display=swap"
    rel="stylesheet"
  />
</head>

<body>
  <!-- ARRANJO FLORAL SUPERIOR -->
  <header class="topo-floral">
    <img
      src="imagens/Arranjo-sup-e.png"
      alt="Arranjo floral esquerdo"
      class="floral esquerda"
    />
    <img
      src="imagens/Arranjo-sup-d.png"
      alt="Arranjo floral direito"
      class="floral direita"
    />
    <div class="monograma">J | R</div>
  </header>

  <main class="convite">
    <h1>Júlia &amp; Ruan</h1>

    <p class="subtitulo">Juntamente com seus pais, convidam para o seu casamento</p>
    <p class="data">23 de Maio de 2026 • 19h</p>

    <p class="local">
      Igreja Casa do Pão<br />
      Av. Durval Alves de Faria, 2167 - Olhos D'água Tropical • Contagem MG
    </p>

    <p class="versículo">
      <span class="texto-versiculo">
        "Para que todos vejam, e saibam, e considerem, e juntamente entendam que a mão
        do Senhor fez isto, e o Santo de Israel o criou."
      </span>
      <span class="referencia">Isaías 41:20</span>
    </p>

    <!-- CONTAGEM -->
    <section class="countdown">
      <div class="timer" id="timer">
        <div><span id="days">0</span><small>Dias</small></div>
        <div><span id="hours">0</span><small>Horas</small></div>
        <div><span id="minutes">0</span><small>Min</small></div>
        <div><span id="seconds">0</span><small>Seg</small></div>
      </div>
    </section>

    <!-- RSVP -->
    <section class="rsvp">
      <img src="imagens/Flor1.png" alt="Flor decorativa" class="flor-rsvp" />
      <h2>Confirme sua presença</h2>

      <form id="rsvpForm">
        <input
          type="text"
          name="nome"
          placeholder="Nome completo *"
          required
          autocomplete="off"
        />

        <p>Você irá ao evento?</p>
        <label><input type="radio" name="presenca" value="sim" required /> Sim</label>
        <label><input type="radio" name="presenca" value="nao" /> Não</label>

        <input
          type="tel"
          name="telefone"
          placeholder="Telefone *"
          required
          autocomplete="off"
        />
        <input
          type="email"
          name="email"
          placeholder="E-mail *"
          required
          autocomplete="off"
        />

        <div id="acompanhantesContainer" style="display:none; margin-top:1em;">
          <label>Quantos acompanhantes?</label>
          <button type="button" id="menos">−</button>
          <input
            type="number"
            id="qtdAcompanhantes"
            value="0"
            min="0"
            max="10"
            readonly
          />
          <button type="button" id="mais">+</button>

          <div id="camposAcompanhantes"></div>
        </div>

        <button type="submit" style="margin-top:1em;">Confirmar</button>
      </form>
    </section>
  </main>

  <footer>Com amor, Júlia e Ruan</footer>

  <!-- SCRIPT RSVP -->
  <script>
    const SCRIPT_URL =
      "https://script.google.com/macros/s/AKfycbzuLhjZddnopm-bQtfKcW9mTlcix6tq94dtzxf-mt8DpTKqeTEVv-peDvB1KbrF68o-rw/exec";

    const presencaRadios = document.querySelectorAll('input[name="presenca"]');
    const acompanhantesContainer = document.getElementById('acompanhantesContainer');
    const menosBtn = document.getElementById('menos');
    const maisBtn = document.getElementById('mais');
    const qtdAcompanhantesInput = document.getElementById('qtdAcompanhantes');
    const camposAcompanhantes = document.getElementById('camposAcompanhantes');

    presencaRadios.forEach((radio) => {
      radio.addEventListener('change', () => {
        acompanhantesContainer.style.display =
          radio.value === 'sim' && radio.checked ? 'block' : 'none';

        if (radio.value !== 'sim') {
          qtdAcompanhantesInput.value = 0;
          camposAcompanhantes.innerHTML = '';
        }
      });
    });

    maisBtn.addEventListener('click', () => {
      let count = Number(qtdAcompanhantesInput.value);
      if (count < 10) {
        count++;
        qtdAcompanhantesInput.value = count;

        const div = document.createElement('div');
        div.id = `acompanhante-${count}`;
        div.innerHTML = `
          <input
            type="text"
            name="acompanhante${count}"
            placeholder="Nome do acompanhante *"
            required
          />
        `;
        camposAcompanhantes.appendChild(div);
      }
    });

    menosBtn.addEventListener('click', () => {
      let count = Number(qtdAcompanhantesInput.value);
      if (count > 0) {
        document.getElementById(`acompanhante-${count}`)?.remove();
        qtdAcompanhantesInput.value = count - 1;
      }
    });

    document.getElementById('rsvpForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const formData = new FormData(this);
      const payload = Object.fromEntries(formData.entries());
      payload.qtdAcompanhantes = qtdAcompanhantesInput.value;

      try {
        await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify(payload),
        });

        alert("Presença confirmada! ❤️");
        this.reset();
        acompanhantesContainer.style.display = "none";
        camposAcompanhantes.innerHTML = "";
        qtdAcompanhantesInput.value = 0;
      } catch (err) {
        alert("Erro ao enviar. Tente novamente.");
      }
    });
  </script>

  <script src="script.js" defer></script>
</body>
</html>
